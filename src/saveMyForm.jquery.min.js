!function(s,a,o){"use strict";s.extend(s.fn,{saveMyForm:function(a,i){return this.each(function(){var t=s.data(this,"plugin_saveMyForm");if(!t){var e="object"==typeof a?a:{};t=s.data(this,"plugin_saveMyForm",new s.saveMyForm(this,e))}"string"==typeof a&&("clearStorage"===a?s.saveMyForm.clearStorage(t._formName):("array"!=typeof i&&(i=[i]),"function"==typeof t[a]&&t[a].apply(t,i)))})}}),s.saveMyForm=function(t,e){this._form=t,this.settings=s.extend({},s.saveMyForm.defaults,e),this.init()},s.extend(s.saveMyForm,{defaults:{exclude:':password, input[type="hidden"], :file, .disable_save',include:null,formName:o,addPathToName:!1,addPathLength:-255,loadInputs:!0,sameNameSeparator:"___",resetOnSubmit:!0},prototype:{_form:null,init:function(){if(this._elementList=[],this._loadingList={},this._formName="",this.setFormName()){var t=this;this._elementList=s.saveMyForm.getElementList(this._formName),s(this._form).find(":input").each(function(){t.addElement(this)}),this.storeElementList(),!0===this.settings.resetOnSubmit&&s(this._form).submit(function(){s.saveMyForm.clearStorage(t._formName)})}},setFormName:function(){var t=s(this._form);if(this._formName=this.settings.formName!==o?this.settings.formName:t.attr("id")!==o?t.attr("id"):t.attr("name")!==o?t.attr("name"):o,this._formName==o){var e=s("form").index(t);if(-1===e)return!1;this._formName=a.location.pathname+"_formindex_"+e}return!0===this.settings.addPathToName&&(this._formName=this._formName+"___"+a.location.pathname.slice(this.settings.addPathLength)),!0},addElement:function(a){var t=s(a);if(!t.is(this.settings.exclude)&&(null===this.settings.include||t.is(this.settings.include))){var e=this,i=this.getName(a),n=o;0<s.saveMyForm.callbacks.length&&s.each(s.saveMyForm.callbacks,function(t,e){if(e.match(a))return n=e,!1}),i&&(t.change(function(t){e.storeElement(t)}).keyup(function(e,a,i){var n,s,o,r,m;null==a&&(a=100);function l(){var t=Date.now()-r;t<a&&0<=t?n=setTimeout(l,a-t):(n=null,i||(m=e.apply(o,s),o=s=null))}function t(){o=this,s=arguments,r=Date.now();var t=i&&!n;return n=n||setTimeout(l,a),t&&(m=e.apply(o,s),o=s=null),m}return t.clear=function(){n&&(clearTimeout(n),n=null)},t.flush=function(){n&&(m=e.apply(o,s),o=s=null,clearTimeout(n),n=null)},t}(function(t){e.storeElement(t)},500)),this._loadingList[i]===o?this._loadingList[i]=0:t.is(":radio")||(this._loadingList[i]++,s.data(a,"multiple",this._loadingList[i]),i=i+this.settings.sameNameSeparator+this._loadingList[i]),-1===this._elementList.indexOf(i)&&this._elementList.push(i),!0===this.settings.loadInputs&&(n&&n.loadElement?n.loadElement(a,this):this.loadElement(a)))}},loadElement:function(t){var e=s(t),a=this.getName(t),i=localStorage.getItem(a);null!==i&&(i=JSON.parse(i),e.is(":checkbox")?e.prop("checked",i).change():e.is(":radio")?i==e.val()&&e.prop("checked",!0).change():e.val(i).change())},storeElement:function(t){var e,a=this.getName(t.target),i=s(t.target);a&&(e=s(t.target).is(":checkbox")?i.prop("checked"):i.val(),localStorage.setItem(a,JSON.stringify(e)))},storeElementList:function(){localStorage.setItem("elementList_"+this._formName,JSON.stringify(this._elementList))},clearElementList:function(){localStorage.removeItem("elementList_"+this._formName)},getName:function(t){var e=s(t),a=e.attr("name")!==o?e.attr("name"):e.attr("id")!==o?e.attr("id"):o;return a===o?o:this._formName+"_"+a+(s.data(t,"multiple")!==o?this.settings.sameNameSeparator+s.data(t,"multiple"):"")}},callbacks:[],addCallback:function(t){s.saveMyForm.callbacks.push(t)},getElementList:function(t){return JSON.parse(localStorage.getItem("elementList_"+t))||[]},clearStorage:function(t){try{var e=s.saveMyForm.getElementList(t);if(0<e.length)return s.each(e,function(t,e){localStorage.removeItem(e)}),!0}catch(t){console.log(t)}return!1}}),s.fn.saveMyForm.defaults=s.saveMyForm.defaults,s.fn.saveMyForm.getElementListByFormName=s.saveMyForm.getElementList,s.fn.saveMyForm.clearStorageByFormName=s.saveMyForm.clearStorage}(jQuery,window,void document);